window.CoolClock=function(t){return this.init(t)},CoolClock.config={tickDelay:1e3,longTickDelay:15e3,defaultRadius:85,renderRadius:100,defaultSkin:"chunkySwiss",defaultFont:"15px sans-serif",skins:{swissRail:{outerBorder:{lineWidth:2,radius:95,color:"black",alpha:1},smallIndicator:{lineWidth:2,startAt:88,endAt:92,color:"black",alpha:1},largeIndicator:{lineWidth:4,startAt:79,endAt:92,color:"black",alpha:1},hourHand:{lineWidth:8,startAt:-15,endAt:50,color:"black",alpha:1},minuteHand:{lineWidth:7,startAt:-15,endAt:75,color:"black",alpha:1},secondHand:{lineWidth:1,startAt:-20,endAt:85,color:"red",alpha:1},secondDecoration:{lineWidth:1,startAt:70,radius:4,fillColor:"red",color:"red",alpha:1}},chunkySwiss:{outerBorder:{lineWidth:4,radius:97,color:"black",alpha:1},smallIndicator:{lineWidth:4,startAt:89,endAt:93,color:"black",alpha:1},largeIndicator:{lineWidth:8,startAt:80,endAt:93,color:"black",alpha:1},hourHand:{lineWidth:12,startAt:-15,endAt:60,color:"black",alpha:1},minuteHand:{lineWidth:10,startAt:-15,endAt:85,color:"black",alpha:1},secondHand:{lineWidth:4,startAt:-20,endAt:85,color:"red",alpha:1},secondDecoration:{lineWidth:2,startAt:70,radius:8,fillColor:"red",color:"red",alpha:1}},chunkySwissOnBlack:{outerBorder:{lineWidth:4,radius:97,color:"white",alpha:1},smallIndicator:{lineWidth:4,startAt:89,endAt:93,color:"white",alpha:1},largeIndicator:{lineWidth:8,startAt:80,endAt:93,color:"white",alpha:1},hourHand:{lineWidth:12,startAt:-15,endAt:60,color:"white",alpha:1},minuteHand:{lineWidth:10,startAt:-15,endAt:85,color:"white",alpha:1},secondHand:{lineWidth:4,startAt:-20,endAt:85,color:"red",alpha:1},secondDecoration:{lineWidth:2,startAt:70,radius:8,fillColor:"red",color:"red",alpha:1}}},isIE:!!document.all,clockTracker:{},noIdCount:0},CoolClock.tick=function(){for(var t in CoolClock.config.clockTracker){var i=CoolClock.config.clockTracker[t]
i.stillHere()&&i.active&&i.refreshDisplay()}this.tickTimeout=setTimeout(CoolClock.tick,CoolClock.config.tickDelay)},CoolClock.prototype={init:function(t){return this.canvasId=t.canvasId,this.skinId=t.skinId||CoolClock.config.defaultSkin,this.font=t.font||CoolClock.config.defaultFont,this.displayRadius=t.displayRadius||CoolClock.config.defaultRadius,this.renderRadius=t.renderRadius||CoolClock.config.renderRadius,this.showSecondHand="boolean"==typeof t.showSecondHand?t.showSecondHand:!0,this.gmtOffset=null!=t.gmtOffset&&""!=t.gmtOffset?parseFloat(t.gmtOffset):null,this.showDigital="boolean"==typeof t.showDigital?t.showDigital:!1,this.showDigital24="boolean"==typeof t.showDigital24?t.showDigital24:!1,this.showDate="boolean"==typeof t.showDate?t.showDate:!1,this.logClock="boolean"==typeof t.logClock?t.logClock:!1,this.logClockRev="boolean"==typeof t.logClock?t.logClockRev:!1,this.tickDelay=CoolClock.config[this.showSecondHand?"tickDelay":"longTickDelay"],this.canvas=document.getElementById(this.canvasId),this.canvas.setAttribute("width",2*this.displayRadius),this.canvas.setAttribute("height",2*this.displayRadius),this.canvas.style.width=2*this.displayRadius+"px",this.canvas.style.maxWidth="100%",this.canvas.style.height="auto",this.scale=this.displayRadius/this.renderRadius,this.ctx=this.canvas.getContext("2d"),this.ctx.scale(this.scale,this.scale),CoolClock.config.clockTracker[this.canvasId]=this,this.start(),this},fullCircleAt:function(t,i,o){this.ctx.save(),this.ctx.globalAlpha=o.alpha,this.ctx.lineWidth=o.lineWidth,CoolClock.config.isIE&&(this.ctx.lineWidth=this.ctx.lineWidth*this.scale),this.ctx.beginPath(),this.ctx.arc(t,i,o.radius,0,2*Math.PI,!1),CoolClock.config.isIE&&this.ctx.arc(t,i,o.radius,-.1,.1,!1),o.fillColor&&(this.ctx.fillStyle=o.fillColor,this.ctx.fill()),o.color&&(this.ctx.strokeStyle=o.color,this.ctx.stroke()),this.ctx.restore()},drawTextAt:function(t,i,o,e){e||(e=this.getSkin()),this.ctx.save(),this.ctx.font=e.font||this.font
var l=this.ctx.measureText(t)
l.height||(l.height=0,this.ctx.textBaseline="middle"),this.ctx.fillText(t,i-l.width/2,o-l.height/2),this.ctx.restore()},lpad2:function(t){return(10>t?"0":"")+t},tickAngle:function(t){var i=3
return this.logClock?0==t?0:Math.log(t*i)/Math.log(60*i):this.logClockRev?(t=(60-t)%60,1-(0==t?0:Math.log(t*i)/Math.log(60*i))):t/60},timeText:function(t,i,o,e,l){return""+(e?t%12==0?12:t%12:t)+":"+this.lpad2(i)+(l?":"+this.lpad2(o):"")+(e?12>t?" am":" pm":"")},radialLineAtAngle:function(t,i){this.ctx.save(),this.ctx.translate(this.renderRadius,this.renderRadius),this.ctx.rotate(Math.PI*(2*t-.5)),this.ctx.globalAlpha=i.alpha,this.ctx.strokeStyle=i.color,this.ctx.lineWidth=i.lineWidth,CoolClock.config.isIE&&(this.ctx.lineWidth=this.ctx.lineWidth*this.scale),i.radius?this.fullCircleAt(i.startAt,0,i):(this.ctx.beginPath(),this.ctx.moveTo(i.startAt,0),this.ctx.lineTo(i.endAt,0),this.ctx.stroke()),this.ctx.restore()},render:function(t,i,o,e){var l=this.getSkin()
this.ctx.clearRect(0,0,2*this.renderRadius,2*this.renderRadius),l.outerBorder&&this.fullCircleAt(this.renderRadius,this.renderRadius,l.outerBorder)
for(var a=0;60>a;a++)a%5&&l.smallIndicator&&this.radialLineAtAngle(this.tickAngle(a),l.smallIndicator),!(a%5)&&l.largeIndicator&&this.radialLineAtAngle(this.tickAngle(a),l.largeIndicator)
if(this.showDigital||this.showDigital24||this.showDate){var s
s=this.showDigital?this.timeText(t,i,o,!0,!1):this.showDigital24?this.timeText(t,i,o,!1,!0):e,this.drawTextAt(s,this.renderRadius,this.renderRadius+this.renderRadius/2)}var n=t%12*5+i/12,c=i+o/60,h=o
l.hourHand&&this.radialLineAtAngle(this.tickAngle(n),l.hourHand),l.minuteHand&&this.radialLineAtAngle(this.tickAngle(c),l.minuteHand),this.showSecondHand&&l.secondHand&&this.radialLineAtAngle(this.tickAngle(h),l.secondHand),CoolClock.config.isIE||(l.hourDecoration&&this.radialLineAtAngle(this.tickAngle(n),l.hourDecoration),l.minDecoration&&this.radialLineAtAngle(this.tickAngle(c),l.minDecoration),this.showSecondHand&&l.secondDecoration&&this.radialLineAtAngle(this.tickAngle(h),l.secondDecoration)),this.extraRender&&this.extraRender(t,i,o)},refreshDisplay:function(){var t=new Date
if(null!=this.gmtOffset){var i=new Date(t.valueOf()+1e3*this.gmtOffset*60*60)
this.render(i.getUTCHours(),i.getUTCMinutes(),i.getUTCSeconds(),i.toLocaleDateString())}else this.render(t.getHours(),t.getMinutes(),t.getSeconds(),t.toLocaleDateString())},stillHere:function(){return null!=document.getElementById(this.canvasId)},stop:function(){this.active=!1},start:function(){this.active=!0},getSkin:function(){var t=CoolClock.config.skins[this.skinId]
return t||(t=CoolClock.config.skins[CoolClock.config.defaultSkin]),t}},CoolClock.findAndCreateClocks=function(){for(var t=document.getElementsByTagName("canvas"),i=0;i<t.length;i++){var o=t[i].className.split(" ")[0].split(":")
"CoolClock"==o[0]&&(t[i].id||(t[i].id="_coolclock_auto_id_"+CoolClock.config.noIdCount++),new CoolClock({canvasId:t[i].id,skinId:o[1],displayRadius:o[2],showSecondHand:"noSeconds"!=o[3],gmtOffset:o[4],showDigital:"showDigital"==o[5],showDigital24:"showDigital24"==o[5],showDate:"showDate"==o[5],logClock:"logClock"==o[6],logClockRev:"logClockRev"==o[6]}))}CoolClock.tick()},window.jQuery&&jQuery(document).ready(CoolClock.findAndCreateClocks)
